<!DOCTYPE html><html lang="es"> <head><meta charset="utf-8"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="viewport" content="width=device-width"><meta name="generator" content="Astro v5.16.7"><title>My Sassy Pet</title><link rel="stylesheet" href="/sassy-pet/_astro/index.CrKblOAT.css"></head> <body class="bg-gray-100 flex items-center justify-center min-h-screen"> <div class="absolute top-4 left-4 max-w-xs bg-amber-200 p-4 rounded-lg shadow-lg"> <h2 class="text-xl font-bold mb-2 text-gray-800">How It Works</h2> <ul class="list-disc list-inside mb-4 text-gray-700"> <li>If you don't interact for 5 minutes, it gets annoyed.</li> <li>If you don't interact for 12 hours, it feels abandoned.</li> <li>You can "feed" or "play" with it to improve its mood.</li> </ul> </div> <div class="bg-white p-8 rounded-lg shadow-lg text-center max-w-sm w-full"> <h1 class="text-2xl font-bold mb-4 text-gray-800">My Sassy Pet</h1> <!-- Contenedor de la Mascota --> <div id="pet-container" class="mb-6"> <!-- Burbuja de Mensaje --> <div class="bg-blue-50 p-4 rounded-xl mb-6 relative border border-blue-100"> <p id="pet-message" class="text-gray-700 italic">"..."</p> <!-- Tri√°ngulo de la burbuja --> <div class="absolute w-0 h-0 border-l-[10px] border-l-transparent border-t-[15px] border-t-blue-50 border-r-[10px] border-r-transparent left-1/2 transform -translate-x-1/2 -bottom-3"></div> </div> <div id="pet-emoji" class="text-9xl mb-2 transition-transform duration-300 transform hover:scale-110 cursor-pointer">
üê±
</div> <br> <p id="pet-mood" class="text-lg font-semibold text-gray-600">
Status: loading...
</p> </div> <!-- Botones de Acci√≥n --> <div class="flex gap-4 justify-center"> <button id="btn-feed" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-green-300">
üçñ Feed
</button> <button id="btn-play" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-300">
‚öΩ Play
</button> </div> <div class="mt-6 text-xs text-gray-400">
Last visit: <span id="last-visit">Never</span> </div> </div> <script type="module">
      // --- CONSTANTES DE CONFIGURACI√ìN ---
      // Primero defin√≠ los tiempos l√≠mite en milisegundos para cada estado.
      // 5 minutos = 5 * 60 segundos * 1000 milisegundos
      const THRESHOLD_ANNOYED = 5 * 60 * 1000;
      // 12 horas = 12 * 60 * 60 segundos * 1000 milisegundos
      const THRESHOLD_ABANDONED = 12 * 60 * 60 * 1000;

      // --- REFERENCIAS AL DOM (ELEMENTOS VISUALES) ---
      // Referenci√© a los elementos HTML a modificar.
      const ui = {
        emoji: document.getElementById("pet-emoji"),
        mood: document.getElementById("pet-mood"),
        message: document.getElementById("pet-message"),
        lastVisit: document.getElementById("last-visit"),
        btnFeed: document.getElementById("btn-feed"),
        btnPlay: document.getElementById("btn-play"),
      };

      // --- MESSAGES FOR EACH MOOD ---
      const MESSAGES = {
        happy: [
          "Oh, look at you ‚Äî actually paying attention.",
          "Do you expect a trophy for this?",
          "Mmm, acceptable.",
          "Don't get used to me being nice.",
          "Well, someone's feeling generous today.",
          "What's it worth to you?",
        ],
        annoyed: [
          "Do you have a watch or did it break?",
          "Oh, look who decided to show up.",
          "Honestly, I was better off without you.",
          "My bowl doesn't fill itself, you know.",
          "Busy scrolling memes, were you?",
          "I almost called the authorities... almost.",
        ],
        abandoned: [
          "Who even are you?",
          "I've already forgotten your face.",
          "I've planned my escape about fifty times.",
          "The plastic plant pays more attention to me.",
          "You came back? How disappointing.",
          "I've already picked a new family ‚Äî in my head.",
        ],
      };

      // --- L√ìGICA DEL ESTADO ---

      // Funci√≥n para obtener el estado de √°nimo actual basado en el tiempo.
      function getMood(lastInteractionTimestamp) {
        const now = Date.now();
        // Calcular la diferencia de tiempo desde la √∫ltima interacci√≥n
        const timeDiff = now - lastInteractionTimestamp;
        // Si ha pasado menos tiempo que el umbral de "Molesto", est√° feliz
        if (timeDiff < THRESHOLD_ANNOYED) return "happy";
        // Si ha pasado menos tiempo que el umbral de "Abandonado", est√° molesto
        if (timeDiff < THRESHOLD_ABANDONED) return "annoyed";
        // Si ha pasado m√°s tiempo, est√° abandonada
        return "abandoned";
      }

      // Funci√≥n para guardar la interacci√≥n actual
      function saveInteraction() {
        const now = Date.now();
        // Se guarda el tiempo actual en el localStorage
        localStorage.setItem("pet_last_interaction", now.toString());
        updateUI(); // Se actualiza la interfaz tras la interacci√≥n
      }

      // Funci√≥n auxiliar para obtener un mensaje aleatorio de un array dependiendo del estado.
      function getRandomMessage(mood) {
        const messagesList = MESSAGES[mood];
        const randomIndex = Math.floor(Math.random() * messagesList.length);
        return messagesList[randomIndex];
      }

      // --- ACTUALIZACI√ìN DE LA INTERFAZ ---

      function updateUI() {
        // Recuperamos el valor guardado. Si no existe, usamos el tiempo actual (primera visita).
        const storedTime = localStorage.getItem("pet_last_interaction");
        const lastInteraction = storedTime ? parseInt(storedTime) : Date.now();

        // Si es la primera visita, guardamos el tiempo inicial.
        if (!storedTime) {
          localStorage.setItem(
            "pet_last_interaction",
            lastInteraction.toString()
          );
        }

        // Determinamos el estado actual
        const mood = getMood(lastInteraction);

        // Se actualizan los elementos visuales seg√∫n el estado
        let moodText = "";
        let emoji = "";
        let moodColorClass = ""; // Color para el texto del estado

        switch (mood) {
          case "happy":
            moodText = "Happy";
            emoji = "üê±";
            moodColorClass = "text-green-600";
            break;
          case "annoyed":
            moodText = "Annoyed";
            emoji = "üòæ";
            moodColorClass = "text-yellow-600";
            break;
          case "abandoned":
            moodText = "Abandoned";
            emoji = "üòø";
            moodColorClass = "text-red-600";
            break;
        }

        // Se aplican los cambios al DOM
        ui.mood.textContent = `Estado: ${moodText}`;
        ui.mood.className = `text-lg font-semibold ${moodColorClass}`;
        ui.emoji.textContent = emoji;

        // Se actualiza el mensaje (solo si el usuario interact√∫a o recarga,
        // para que no cambie solo por el timer, aunque aqu√≠ lo actualizamos en cada updateUI)
        ui.message.textContent = `"${getRandomMessage(mood)}"`;

        // Se formatea la fecha de √∫ltima visita para mostrarla
        const date = new Date(lastInteraction);
        ui.lastVisit.textContent =
          date.toLocaleTimeString() + " " + date.toLocaleDateString();
      }

      // --- INTERACTIVIDAD ---
      // Asignamos la funci√≥n saveInteraction a los botones.
      // Ambos botones hacen lo mismo: "resetean" el contador de atenci√≥n.
      ui.btnFeed.addEventListener("click", () => {
        alert("You fed the pet... it reluctantly accepts.");
        saveInteraction();
      });

      ui.btnPlay.addEventListener("click", () => {
        alert("You try to play... it looks at you with disdain but plays.");
        saveInteraction();
      });

      // Inicializamos la interfaz al cargar la p√°gina
      updateUI();

      // Se actualiza autom√°ticamente cada minuto para reflejar cambios de estado en tiempo real
      setInterval(updateUI, 60000);
    </script> </body> </html>